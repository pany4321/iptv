# EPG 功能设计文档

## 1. 整体架构
采用两栏/三栏可变式布局，由React前端和Fastify后端构成。

## 2. 布局设计
- **默认布局（两栏）:** 左侧为`频道列表`，右侧为`播放器`。
- **节目单展开布局（三栏）:** 当用户请求查看节目单时，`节目单`面板会在`频道列表`和`播放器`之间插入，形成三栏视图。

## 3. 后端设计 (EPG 服务)
(后端设计保持不变，继续支持解析XML和Gzip压缩文件)

## 4. 前端设计 (用户界面)

### 4.1. 可收缩的频道列表
- **功能:** 左侧的`频道列表`栏可以被最小化。
- **触发方式:** 在频道列表的标题栏增加一个“收起/展开”的图标按钮。
- **交互:** 点击“收起”按钮，侧边栏会平滑收缩至一个仅显示频道Logo的窄条。再次点击该窄条上的“展开”按钮，侧边栏恢复原状。
- **状态持久化:** 侧边栏的展开/收起状态将被保存在 `localStorage`。

### 4.2. 播放列表快速切换
- **UI组件:** 频道列表顶部的静态标题将被一个自定义的下拉菜单组件所取代。
- **显示:** 该组件默认显示当前加载的播放列表的名称。
- **交互:** 点击该组件会向下展开一个菜单，列出所有已保存的播放列表。
- **操作:** 用户在菜单中选择一个新的播放列表后，系统将立即调用 `handleLoad` 函数加载该列表。

### 4.3. 频道节目单详情视图
- **触发方式:** 在频道列表的每一项中，增加一个 `>>` 按钮。
- **UI展现:** 点击 `>>` 按钮后，一个“节目单详情”面板会在频道列表和播放器之间出现。
- **面板内容:**
  - **标题:** 显示频道名称及“今日节目单”字样。
  - **列表:** 一个可滚动的垂直列表，按时间顺序显示该频道当天的所有节目。
  - **列表项:** 每一项包含节目的开始时间、节目名称。当前正在播放的节目项应高亮显示，已播出的节目项应置灰。
- **关闭方式:** 
  - **图标关闭:** 面板右上角提供一个 `X` 图标按钮用于关闭。
  - **重复点击关闭:** 再次点击同一个频道的 `>>` 按钮可收起面板。